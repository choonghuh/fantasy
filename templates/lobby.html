<html>
<head>
	<div id='header'><p>Draft Lobby</p></div>
</head>
<body>

	{% if player_list %}
		<ul>
			{% for player in player_list %}
				<li> {{ player.name }} is ranked at {{ player.rank }} </li>
			{% endfor %}
		</ul>
	{% else %}
		<p>Player list is empty or unavailable!</p>
	{% endif %}

	<input id='submit'></input>
	<button id='sendbutton'>Send</button>
</br>
	<div id='chatbox'></div>

	<script type='text/javascript'> 
		var chatbox = document.getElementById('chatbox');
		var wsock = new WebSocket('ws://127.0.0.1:8000');
		var submit = document.getElementById('submit');
		var sendbutton = document.getElementById('sendbutton');

		wsock.onmessage = function(msg) {
			chatbox.innerHTML+='<p>'+msg.data+'</p>';
		};

		wsock.onopen = function(){
			chatbox.innerHTML += "<p>Okay talk your trash to each other</p>";
		};

		wsock.onclose = function(){
			chatbox.innerHTML += '<p>Your connection was lost.</p>';
		};

		sendbutton.onclick = function(){
			if(submit.value!='')
			{
				wsock.send(submit.value);
				submit.value='';
			}
		};

		submit.addEventListener("keydown", function(e) {
			// if (!e) {var e = window.event;}
			// e.preventDefault();

			if (e.keyCode==13)
			{
				wsock.send(submit.value);
				submit.value="";
			}
		});

	</script>
</body>
</html>